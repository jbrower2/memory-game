<html>
<head>
<style>
html {
  font-family: "Comic Sans MS";
}

html, body {
  height: 100%;
  margin: 0px;
  overflow: hidden;
}

.card .front {
  background-color: #7030a0;
  color: white;
}

.card .back {
  background-color: #dbb2f9;
  color: black;
}

.card.matched .back {
  background-color: #74ff74;
  color: black;
}

table {
  width: 100%;
  height: 100%;
}

td {
  perspective: 500px;
}

.card.flipped,
.card .back {
  -webkit-transform: rotatey(-180deg);
  -moz-transform: rotatey(-180deg);
  -ms-transform: rotatey(-180deg);
  -o-transform: rotatey(-180deg);
  transform: rotatey(-180deg);
}

.card {
  width: 100%;
  height: 100%;

  -webkit-transform-style: preserve-3d;
  -moz-transform-style: preserve-3d;
  -ms-transform-style: preserve-3d;
  -o-transform-style: preserve-3d;
  transform-style: preserve-3d;
}

.card,
.card .back {
  -webkit-transition: 1s;
  -moz-transition: 1s;
  -ms-transition: 1s;
  -o-transition: 1s;
  transition: 1s;
}

.card .front,
.card .back {
  border: 3px solid white;
  width: 100%;
  height: 100%;
  cursor: pointer;
  position: absolute;
  box-sizing: border-box;
  box-shadow: 0 0 10px black;
  font-size: 5em;
  display: flex;
  align-items: center;
  justify-content: center;

  -webkit-backface-visibility: hidden;
  -moz-backface-visibility: hidden;
  -ms-backface-visibility: hidden;
  -o-backface-visibility: hidden;
  backface-visibility: hidden;

  -webkit-touch-callout: none;
  -webkit-user-select: none;
  -khtml-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}
</style>
<script>
function buildPage() {
  const maxSightWord = 50;
  const width = 4;
  const height = 4;
  const sightWords = [
    "the", "of", "and", "a", "to", "in", "is", "you", "that", "it",
    "he", "was", "for", "on", "are", "as", "with", "his", "they", "I",
    "at", "be", "this", "have", "from", "or", "one", "had", "by", "words",
    "but", "not", "what", "all", "were", "we", "when", "your", "can", "said",
    "there", "use", "an", "each", "which", "she", "do", "how", "their", "if",
    "will", "up", "other", "about", "out", "many", "then", "them", "these", "so",
    "some", "her", "would", "make", "like", "him", "into", "time", "has", "look",
    "two", "more", "write", "go", "see", "number", "no", "way", "could", "people",
    "my", "than", "first", "water", "been", "called", "who", "oil", "sit", "now",
    "find", "long", "down", "day", "did", "get", "come", "made", "may", "part",

    "over", "new", "sound", "take", "only", "little", "work", "know", "place", "years",
    "live", "me", "back", "give", "most", "very", "after", "things", "our", "just",
    "name", "good", "sentence", "man", "think", "say", "great", "where", "help", "through",
    "much", "before", "line", "right", "too", "means", "old", "any", "same", "tell",
    "boy", "follow", "came", "want", "show", "also", "around", "form", "three", "small",
    "set", "put", "end", "does", "another", "well", "large", "must", "big", "even",
    "such", "because", "turn", "here", "why", "ask", "went", "men", "read", "need",
    "land", "different", "home", "us", "move", "try", "kind", "hand", "picture", "again",
    "change", "off", "play", "spell", "air", "away", "animal", "house", "point", "page",
    "letter", "mother", "answer", "found", "study", "still", "learn", "should", "America", "world",

    "high", "every", "near", "add", "food", "between", "own", "below", "country", "plant",
    "last", "school", "father", "keep", "tree", "never", "start", "city", "earth", "eyes",
    "light", "thought", "head", "under", "story", "saw", "left", "don’t", "few", "while",
    "along", "might", "close", "something", "seem", "next", "hard", "open", "example", "begin",
    "life", "always", "those", "both", "paper", "together", "got", "group", "often", "run",
    "important", "until", "children", "side", "feet", "car", "mile", "night", "walk", "white",
    "sea", "began", "grow", "took", "river", "four", "carry", "state", "once", "book",
    "hear", "stop", "without", "second", "late", "miss", "idea", "enough", "eat", "face",
    "watch", "far", "Indian", "real", "almost", "let", "above", "girl", "sometimes", "mountains",
    "cut", "young", "talk", "soon", "list", "song", "being", "leave", "family", "it’s",

    "body", "music", "color", "stand", "sun", "questions", "fish", "area", "mark", "dog",
    "horse", "birds", "problem", "complete", "room", "knew", "since", "ever", "piece", "told",
    "usually", "didn’t", "friends", "easy", "heard", "order", "red", "door", "sure", "become",
    "top", "ship", "across", "today", "during", "short", "better", "best", "however", "low",
    "hours", "black", "products", "happened", "whole", "measure", "remember", "early", "waves", "reached",
    "listen", "wind", "rock", "space", "covered", "fast", "several", "hold", "himself", "toward",
    "five", "step", "morning", "passed", "vowel", "true", "hundred", "against", "pattern", "numeral",
    "table", "north", "slowly", "money", "map", "farm", "pulled", "draw", "voice", "seen",
    "cold", "cried", "plan", "notice", "south", "sing", "war", "ground", "fall", "king",
    "town", "I’ll", "unit", "figure", "certain", "field", "travel", "wood", "fire", "upon",

    "done", "English", "road", "half", "ten", "fly", "gave", "box", "finally", "wait",
    "correct", "oh", "quickly", "person", "became", "shown", "minutes", "strong", "verb", "stars",
    "front", "feel", "fact", "inches", "street", "decided", "contain", "course", "surface", "produce",
    "building", "ocean", "class", "note", "nothing", "rest", "carefully", "scientists", "inside", "wheels",
    "stay", "green", "known", "island", "week", "less", "machine", "base", "ago", "stood",
    "plane", "system", "behind", "ran", "round", "boat", "game", "force", "brought", "understand",
    "warm", "common", "bring", "explain", "dry", "though", "language", "shape", "deep", "thousands",
    "yes", "clear", "equation", "yet", "government", "filled", "heat", "full", "hot", "check",
    "object", "am", "rule", "among", "noun", "power", "cannot", "able", "six", "size",
    "dark", "ball", "material", "special", "heavy", "fine", "pair", "circle", "include", "built",

    "can’t", "matter", "square", "syllables", "perhaps", "bill", "felt", "suddenly", "test", "direction",
    "center", "farmers", "ready", "anything", "divided", "general", "energy", "subject", "Europe", "moon",
    "region", "return", "believe", "dance", "members", "picked", "simple", "cells", "paint", "mind",
    "love", "cause", "rain", "exercise", "eggs", "train", "blue", "wish", "drop", "developed",
    "window", "difference", "distance", "heart", "site", "sum", "summer", "wall", "forest", "probably",
    "legs", "sat", "main", "winter", "wide", "written", "length", "reason", "kept", "interest",
    "arms", "brother", "race", "present", "beautiful", "store", "job", "edge", "past", "sign",
    "record", "finished", "discovered", "wild", "happy", "beside", "gone", "sky", "grass", "million",
    "west", "lay", "weather", "root", "instruments", "meet", "third", "months", "paragraph", "raised",
    "represent", "soft", "whether", "clothes", "flowers", "shall", "teacher", "held", "describe", "drive",

    "cross", "speak", "solve", "appear", "metal", "son", "either", "ice", "sleep", "village",
    "factors", "result", "jumped", "snow", "ride", "care", "floor", "hill", "pushed", "baby",
    "buy", "century", "outside", "everything", "tall", "already", "instead", "phrase", "soil", "bed",
    "copy", "free", "hope", "spring", "case", "laughed", "nation", "quite", "type", "themselves",
    "temperature", "bright", "lead", "everyone", "method", "section", "lake", "iron", "within", "dictionary",
    "hair", "age", "amount", "scale", "pounds", "although", "per", "broken", "moment", "tiny",
    "possible", "gold", "milk", "quiet", "natural", "lot", "stone", "act", "build", "middle",
    "speed", "count", "consonant", "someone", "sail", "rolled", "bear", "wonder", "smiled", "angle",
    "fraction", "Africa", "killed", "melody", "bottom", "trip", "hole", "poor", "let’s", "fight",
    "surprise", "French", "died", "beat", "exactly", "remain", "dress", "cat", "couldn’t", "fingers",

    "row", "least", "catch", "climbed", "wrote", "shouted", "continued", "itself", "else", "plains",
    "gas", "England", "burning", "design", "joined", "foot", "law", "ears", "glass", "you’re",
    "grew", "skin", "valley", "cents", "key", "president", "brown", "trouble", "cool", "cloud",
    "lost", "sent", "symbols", "wear", "bad", "save", "experiment", "engine", "alone", "drawing",
    "east", "choose", "single", "touch", "information", "express", "mouth", "yard", "equal", "decimal",
    "yourself", "control", "practice", "report", "straight", "rise", "statement", "stick", "party", "seeds",
    "suppose", "woman", "coast", "bank", "period", "wire", "pay", "clean", "visit", "bit",
    "whose", "received", "garden", "please", "strange", "caught", "fell", "team", "God", "captain",
    "direct", "ring", "serve", "child", "desert", "increase", "history", "cost", "maybe", "business",
    "separate", "break", "uncle", "hunting", "flow", "lady", "students", "human", "art", "feeling",

    "supply", "corner", "electric", "insects", "crops", "tone", "hit", "sand", "doctor", "provide",
    "thus", "won’t", "cook", "bones", "mall", "board", "modern", "compound", "mine", "wasn’t",
    "fit", "addition", "belong", "safe", "soldiers", "guess", "silent", "trade", "rather", "compare",
    "crowd", "poem", "enjoy", "elements", "indicate", "except", "expect", "flat", "seven", "interesting",
    "sense", "string", "blow", "famous", "value", "wings", "movement", "pole", "exciting", "branches",
    "thick", "blood", "lie", "spot", "bell", "fun", "loud", "consider", "suggested", "thin",
    "position", "entered", "fruit", "tied", "rich", "dollars", "send", "sight", "chief", "Japanese",
    "stream", "planets", "rhythm", "eight", "science", "major", "observe", "tube", "necessary", "weight",
    "meat", "lifted", "process", "army", "hat", "property", "particular", "swim", "terms", "current",
    "park", "sell", "shoulder", "industry", "wash", "block", "spread", "cattle", "wife", "sharp",

    "company", "radio", "we’ll", "action", "capital", "factories", "settled", "yellow", "isn’t", "southern",
    "truck", "fair", "printed", "wouldn’t", "ahead", "chance", "born", "level", "triangle", "molecules",
    "France", "repeated", "column", "western", "church", "sister", "oxygen", "plural", "various", "agreed",
    "opposite", "wrong", "chart", "prepared", "pretty", "solution", "fresh", "shop", "suffix", "especially",
    "shoes", "actually", "nose", "afraid", "dead", "sugar", "adjective", "fig", "office", "huge",
    "gun", "similar", "death", "score", "forward", "stretched", "experience", "rose", "allow", "fear",
    "workers", "Washington", "Greek", "women", "bought", "led", "march", "northern", "create", "British",
    "difficult", "match", "win", "doesn’t", "steel", "total", "deal", "determine", "evening", "hoe",
    "rope", "cotton", "apple", "details", "entire", "corn", "substances", "smell", "tools", "conditions",
    "cows", "track", "arrived", "located", "sir", "seat", "division", "effect", "underline", "view"
  ];

  const wordCount = width * height / 2;
  const wordList = [];

  // fill list of words
  while (wordList.length < wordCount) {
    const word = sightWords[Math.floor(Math.random() * maxSightWord)];
    if (wordList.indexOf(word) === -1) {
      wordList.push(word);
    }
  }

  // duplicate list
  wordList.push(...wordList);

  // shuffle
  for (let i = 0; i < wordList.length; i++) {
    const j = Math.floor(Math.random() * wordList.length);
    if (i !== j) {
      const temp = wordList[i];
      wordList[i] = wordList[j];
      wordList[j] = temp;
    }
  }

  const table = document.createElement("table");
  document.body.appendChild(table);
  const flippedCells = {};

  function allMatched() {
    if (Object.keys(flippedCells).length < wordCount) {
      return false;
    }

    for (const flipped of Object.values(flippedCells)) {
      if (!flipped.matched) {
        return false;
      }
    }

    return true;
  }

  function showSmileys() {
    const screen_width = window.screen.width;
    const screen_height = window.screen.height;
    const flame_count = 25 + Math.round((Math.random() * 80));
    const start_offset_y = -45;
    const max_offset_y = screen_height + 45;
    const min_flame_size = 8;
    const max_flame_size = 40;
    const update = () => {
      flames.forEach((flame) => {
        const {
          speed,
          offsetY,
          accel
        } = flame.dataset;
        const newOffset = (offsetY + speed) * (1 + accel);
        //console.log(newOffset);
        flame.dataset.offsetY = (parseInt(flame.dataset.offsetY) + parseInt(speed)) * (1 + parseInt(accel));
        if (flame.dataset.offsetY >= max_offset_y) {
          flame.dataset.offsetX = Math.round(Math.random() * screen_width);
          flame.dataset.offsetY = (start_offset_y) - Math.round(Math.random() * 250);
          flame.dataset.accel = Math.random() * .5;
          flame.dataset.speed = 3 + (Math.random() * 12);
          flame.dataset.scale = .2 + (Math.random() * 2);
          render_full(flame);
          return;
        }
        render_partial(flame);
      });
    };
    const render_full = (flame) => {
      const cursors = [
        'alias',
        'all-scroll',
        'auto',
        'cell',
        'context-menu',
        'col-resize',
        'copy',
        'crosshair',
        'default',
        'e-resize',
        'ew-resize',
        'grab',
        'grabbing',
        'help',
        'move',
        'n-resize',
        'ne-resize',
        'nesw-resize',
        'ns-resize',
        'nw-resize',
        'nwse-resize',
        'no-drop',
        'none',
        'not-allowed',
        'pointer',
        'progress',
        'row-resize',
        's-resize',
        'se-resize',
        'sw-resize',
        'text',
        'URL',
        'vertical-text',
        'w-resize',
        'wait',
        'zoom-in',
        'zoom-out',
      ];
      const cursor = cursors[Math.round(Math.random() * cursors.length)];
      const {
        scale
      } = flame.dataset;
      flame.style.fontSize = `${min_flame_size + (max_flame_size * scale)}px`;
      flame.style.position = 'fixed';
      flame.style.left = `${flame.dataset.offsetX}px`;
      flame.style.top = `${flame.dataset.offsetY}px`;
      flame.style.zIndex = '-99999px';
      flame.style.cursor = cursor;
    }
    const render_partial = (flame) => {
      //console.log(flame);
      const {
        scale
      } = flame.dataset;
      flame.style.left = `${flame.dataset.offsetX}px`;
      flame.style.top = `${flame.dataset.offsetY}px`;
    }
    const flames = [];
    for (let i = 0; i < flame_count; i += 1) {
      const flame = document.createElement('div');
      flame.dataset.offsetX = Math.round(Math.random() * screen_width);
      flame.dataset.offsetY = start_offset_y - Math.round(Math.random() * 250);
      flame.dataset.accel = Math.random() * .5;
      flame.dataset.speed = 3 + (Math.random() * 12);
      flame.dataset.scale = .2 + (Math.random() * 2);
      flame.innerText = "😃";
      flames.push(flame);
      document.body.append(flame);
      render_full(flame);
    }
    window.setInterval(update, 16);
    return flames;
  }

  for (let y = 0, i = 0; y < height; y++) {
    const tr = document.createElement("tr");
    table.appendChild(tr);

    for (let x = 0; x < width; x++, i++) {
      const word = wordList[i];

      const td = document.createElement("td");
      tr.appendChild(td);

      const card = document.createElement("div");
      td.appendChild(card);
      card.classList.add("card");
      card.onclick = function() {
        if (card.matched) return;
        card.classList.toggle("flipped");
        if (card.classList.contains("flipped")) {
          const flipped = flippedCells[word];
          if (flipped) {
            flipped.classList.toggle("matched");
            flipped.matched = true;
            card.classList.toggle("matched");
            card.matched = true;
            if (allMatched()) {
              setTimeout(showSmileys, 1000);
            }
          } else {
            flippedCells[word] = card;
          }
        } else {
          delete flippedCells[word];
        }
      };

      const front = document.createElement("div");
      card.appendChild(front);
      front.classList.add("front");

      const frontText = document.createElement("div");
      front.appendChild(frontText);
      frontText.innerText = i + 1;

      const back = document.createElement("div");
      card.appendChild(back);
      back.classList.add("back");

      const backText = document.createElement("div");
      back.appendChild(backText);
      backText.innerText = word;
    }
  }
}
</script>
</head>
<body onload="buildPage()">
</body>
</html>